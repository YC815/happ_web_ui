äº†è§£ï¼æ—¢ç„¶ **execute æ˜¯è‡ªå‹•ç”± n8n è§¸ç™¼**ï¼Œé‚£ WebUI çš„æ ¸å¿ƒåŠŸèƒ½å°±æ˜¯ï¼š

1. **æŸ¥è©¢æˆ¿é–“ï¼ˆroomsï¼‰**
2. **å»ºç«‹è¨ˆåŠƒï¼ˆcreate planï¼‰**
3. **ç®¡ç†è¨ˆåŠƒï¼ˆlist / patch / deleteï¼‰**
4. **è§€å¯Ÿé‹è¡Œç‹€æ³ï¼ˆplans ç‹€æ…‹ + tasksï¼‰**

é€™æ˜¯æ¨™æº–çš„ **ã€Œç®¡ç†å¾Œå° Dashboardã€é¡ WebUI**ã€‚

ä¸‹é¢ç›´æ¥çµ¦ä½  **æœ€é©åˆä½ çš„æ¶æ§‹å»ºè­°ï¼ˆæœ€ç°¡ Â· æœ€æ˜“æ“´å…… Â· æœ€å¥½ç¶­è­·ï¼‰**ã€‚

---

# ğŸ¥‡ **æœ€ä½³æ¶æ§‹ï¼šNext.jsï¼ˆApp Routerï¼‰+ shadcn/ui + SWR**

é€™å€‹æ¶æ§‹ï¼š

- å‰ç«¯é é¢ï¼ˆæŸ¥æˆ¿ã€è¨ˆåŠƒç®¡ç†ï¼‰
- ä½ ä¸ç”¨åˆ»æ„åˆ†å‰å¾Œç«¯
- API ç›´æ¥æ‰“ Happ server æˆ–ç”¨ Next API Route ç•¶ proxy
- ä½ æ‰€æœ‰ç¾æœ‰å°ˆæ¡ˆï¼ˆMailChat / Cello & Co.ï¼‰éƒ½å¯ä»¥ç›´æ¥è¤‡ç”¨

éå¸¸é©åˆä½ ã€‚

---

# ğŸŒ± **æ¨è–¦çš„æŠ€è¡“çµ„æˆ**

## **â‘  Next.jsï¼ˆApp Routerï¼‰**

ç†ç”±ï¼š

- æœ‰ Layoutï¼Œå¾ˆé©åˆå¾Œå°ï¼ˆå´é‚Šæ¬„ + ä¸»å…§å®¹ï¼‰
- è‡ªç„¶æ”¯æ´ Server Components ï¼ˆåŠ å¿«åˆæ¬¡è¼‰å…¥ï¼‰
- å¯ä»¥ç”¨ **Server Action** ç›´æ¥æ‰“ Happ APIï¼ˆç°¡åŒ–è¶…å¤šï¼‰

---

## **â‘¡ shadcn/ui**

ç†ç”±ï¼š

- ç¾è§€ã€å¯å®¢è£½ã€ç¨‹å¼ç¢¼ä¹¾æ·¨
- è¡¨æ ¼ã€Modalã€Formã€Tabsã€Date Picker éƒ½ç¾æˆ
- èƒ½åšå‡ºä½ å¸Œæœ›çš„ã€ŒApple é¢¨ç®¡ç†å¾Œå° UIã€

ç•«é¢å¤§æ¦‚åƒé€™æ¨£ï¼š

- /rooms â†’ æˆ¿é–“æœå°‹è¡¨æ ¼
- /plans â†’ è¨ˆåŠƒåˆ—è¡¨ï¼ˆæŒ‰ç‹€æ…‹åˆ† Tabï¼‰
- /plans/new â†’ è¨‚æˆ¿è¨ˆåŠƒ Form
- /plans/[id] â†’ è¨ˆåŠƒï¼‹ä»»å‹™é€²åº¦è¦–è¦ºåŒ–

---

## **â‘¢ SWR**ï¼ˆå–ä»£ React Queryï¼‰

ç†ç”±ï¼š

- æŸ¥ room å’Œ plans éƒ½æ˜¯ GET
- SWR å…§å»ºï¼š

  âœ” è‡ªå‹•é‡æ–°æ•´ç†
  âœ” å¿«å–
  âœ” Revalidate
  âœ” Request åˆä½µ

éå¸¸é©åˆä½ è¦åšçš„ã€Œç‹€æ…‹ Dashboardã€ã€‚

ä¾‹å¦‚ï¼š

```ts
const { data, isLoading } = useSWR("/api/rooms/available");
```

---

## **â‘£ Next.js API Routes ç•¶ proxy**ï¼ˆå¯é¸ï¼‰

å¦‚æœ Happ API æ²’é–‹ CORS â†’ ç›´æ¥ proxy

Example:

```
frontend â†’ /api/rooms â†’ Happ Server
```

ä½ çš„ WebUI å°±ä¸æœƒè¢«è·¨åŸŸå¡ä½ã€‚

---

## **â‘¤ èªè­‰ç”¨ Clerkï¼ˆæˆ–ä¸ç”¨ï¼‰**

å¦‚æœé€™æ˜¯ä½ è‡ªå·±ç”¨çš„å¾Œå° â†’ æ ¹æœ¬ä¸éœ€è¦ç™»å…¥
ç›´æ¥ WebUI ç•¶ç§æœ‰å·¥å…·å³å¯ã€‚

---

# ğŸ“ **UI é é¢æ¶æ§‹ï¼ˆä½ æœƒéœ€è¦çš„é é¢ï¼‰**

---

## **é¦–é ï¼š/dashboard**

å…§å®¹ï¼š

- ä»Šæ—¥è¦åŸ·è¡Œçš„è¨ˆåŠƒæ•¸
- ç›®å‰ active plans
- çºŒè¨‚ä¸­/ç­‰å¾…ä¸­æ•¸é‡
- å¤±æ•— alertï¼ˆå¦‚æœè¦ï¼‰

é€™æ˜¯å¯é¸ï¼Œä½†ä¹‹å¾Œä½ ä¸€å®šæœƒæƒ³åŠ ã€‚

---

## **â‘  æˆ¿é–“æŸ¥è©¢é  /rooms**

åŠŸèƒ½ï¼š

- Queryï¼šcapacity / room_id / city
- é¡¯ç¤ºæ‰€æœ‰å¯ç”¨æˆ¿é–“
- æŒ‰ã€Œä¸€éµå»ºç«‹è¨ˆåŠƒã€è·³åˆ° new plan é é¢ï¼ˆå¸¶åƒæ•¸ï¼‰

UI å…ƒä»¶ï¼š

- Inputï¼ˆcapacityï¼‰
- Selectï¼ˆå€åŸŸï¼‰
- Button
- Tableï¼ˆshadcn DataTableï¼‰

---

## **â‘¡ è¨ˆåŠƒåˆ—è¡¨é  /plans**

Tab æ•´ç†ï¼š

- pending
- in_progress
- completed
- failed
- cancelled

æ¯ä¸€åˆ—é¡¯ç¤ºï¼š

- room_id
- æ™‚æ®µ
- ç‹€æ…‹ï¼ˆBadgeï¼‰
- order_urlï¼ˆå¦‚æœ‰ï¼‰
- created_at
- actionsï¼šæŸ¥çœ‹ / ä¿®æ”¹ / å–æ¶ˆ

---

## **â‘¢ å»ºç«‹è¨ˆåŠƒ /plans/new**

è¡¨å–®ï¼š

- room_idï¼ˆSelectï¼‰
- æ—¥æœŸ DatePicker
- start_timeï¼ˆDropdownï¼‰
- end_timeï¼ˆDropdownï¼‰
- line_user_idï¼ˆå¯é¸ï¼‰
- ignore_announcementï¼ˆCheckï¼‰

é€å‡ºå¾Œï¼š

- Call POST /plans
- å°å‘ `/plans/{id}`

---

## **â‘£ è¨ˆåŠƒè©³æƒ… /plans/{plan_id}**

é¡¯ç¤ºï¼š

- è¨ˆåŠƒè³‡è¨Š
- è¨‚æˆ¿ä»»å‹™æ¸…å–®ï¼ˆå«ç‹€æ…‹ã€åŸ·è¡Œæ™‚é–“ï¼‰
- å¦‚æœ recurring â†’ é¡¯ç¤ºæœªä¾†ä»»å‹™

å¯æ“ä½œï¼š

- ä¿®æ”¹ end_time
- å–æ¶ˆè¨ˆåŠƒ
- åœ¨å³å´é¡¯ç¤º log timeline

---

# ğŸ§Š **å»ºè­°çš„è³‡æ–™æµæ¶æ§‹**

```
[Next.js Page]
   â†“ (SWR GET)
[Next API Route /api/... ] â†â†’ [Happ API]

[Plan Form]
   â†“ (Server Action)
[Happ POST /plans]
```

---

# ğŸ“Œ **ç‚ºä»€éº¼é€™å€‹æ¶æ§‹æœ€é©åˆä½ ï¼Ÿ**

### âœ” ä½ å·²ç¶“ç†Ÿæ‚‰ Next.jsï¼ˆç›´æ¥ä¸Šæ‰‹æ¯«ç„¡å£“åŠ›ï¼‰

### âœ” shadcn/ui è®“å¾Œå° UI è¶…å¿«æ¼‚äº®

### âœ” SWR å®Œæˆ 90% çš„ç‹€æ…‹ã€error handling

### âœ” Server Action è®“ä½ ä¸ç”¨å†å¯« axios boilerplate

### âœ” æ¶æ§‹ä¹¾æ·¨ï¼‹æ“´å……å¿«

### âœ” å®Œå…¨ä¸éœ€è¦è³‡æ–™åº«ï¼ˆHapp server æœ¬èº«æœ‰ï¼‰

---

# ğŸš€ **å¦‚æœä½ é¡˜æ„ï¼Œæˆ‘å¯ä»¥ç›´æ¥å¹«ä½ ï¼š**

1. ç”¢ç”Ÿ **ä½ çš„ WebUI ç›®éŒ„çµæ§‹ scaffold**

2. å¹«ä½ åš **UI Wireframeï¼ˆè‰ç¨¿åœ–ï¼‰**

3. å¹«ä½ å¯«ï¼š

   - `/rooms/page.tsx`
   - `/plans/page.tsx`
   - `/plans/new/page.tsx`
   - `/plans/[id]/page.tsx`

4. æˆ– **æ•´å¥— Next.js å°ˆæ¡ˆåˆå§‹åŒ–éª¨æ¶**ï¼ˆå« shadcn/ui + Tailwindï¼‰

åªè¦å‘Šè¨´æˆ‘ï¼š

ğŸ‘‰ ä½ æƒ³è¦ **Next.js 17 App Router** é‚„æ˜¯ **Next.js 13/14**ï¼Ÿ
ğŸ‘‰ éœ€ä¸éœ€è¦å¹«ä½ ç”¢ç”Ÿ **æ•´å¥— WebUI çš„ mockupï¼ˆç„¡ç¨‹å¼ç¢¼ï¼‰**ï¼Ÿ
